{"version":3,"file":"bundle.js","sources":["src/xhr.js","src/repo/browserify.js","src/repo/rawUrl.js","src/repo/unpkg.js","src/repo/main.js","src/loader/tagSrcLoader.js","src/loader/main.js","src/winWatchPollyfill.js","src/autoExec.js","src/chainloadr.js"],"sourcesContent":["/* eslint-env es6, browser */\n\nexport function urlGet (url) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst xhttp = new XMLHttpRequest()\n\n\t\txhttp.onerror = function onerror () {\n\t\t\treject(this)\n\t\t}\n\n\t\txhttp.onloadend = function onloadend () {\n\t\t\tresolve(this.responseText)\n\t\t}\n\n\t\txhttp.open(\"GET\", url, true)\n\n\t\txhttp.send()\n\t})\n}\n\nexport function urlPing (url) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst xhttp = new XMLHttpRequest()\n\n\t\txhttp.onerror = function onerror () {\n\t\t\treject(this)\n\t\t}\n\n\t\txhttp.onloadstart = function onloadstart () {\n\t\t\tthis.abort()\n\t\t\tresolve()\n\t\t}\n\n\t\txhttp.open(\"GET\", url, true)\n\n\t\txhttp.send()\n\t})\n}\n","/* eslint-env es6, browser */\n\nimport {urlPing} from \"../xhr.js\"\n\nexport default class browserify {\n\tstatic checkForPackage (pkg) {\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.buildPackageUrl(pkg).then((url) => {\n\t\t\t\turlPing(url).then(resolve)\n\t\t\t})\n\t\t})\n\t}\n\n\tstatic buildPackageUrl (pkg) {\n\t\treturn new Promise((resolve) => {\n\t\t\tresolve(`https://wzrd.in/standalone/${pkg}`)\n\t\t})\n\t}\n}\n","/* eslint-env es6, browser */\n\nimport {urlPing} from \"../xhr.js\"\n\nexport default class rawUrl {\n\tstatic checkForPackage (pkg) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (pkg.indexOf(\"./\") < 0 && pkg.indexOf(\"//\") < 0) {\n\t\t\t\treject(new Error(\"Doesn't look like a path to me.\"))\n\t\t\t} else {\n\t\t\t\turlPing(pkg).then(resolve)\n\t\t\t}\n\t\t})\n\t}\n\n\tstatic buildPackageUrl (pkg) {\n\t\treturn new Promise((resolve) => {\n\t\t\tresolve(`${pkg}`)\n\t\t})\n\t}\n}\n","/* eslint-env es6, browser */\n\nimport {urlPing} from \"../xhr.js\"\n\nexport default class unpkg {\n\tstatic checkForPackage (pkg) {\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.buildPackageUrl(pkg).then((url) => {\n\t\t\t\turlPing(url).then(resolve)\n\t\t\t})\n\t\t})\n\t}\n\n\tstatic buildPackageUrl (pkg) {\n\t\treturn new Promise((resolve) => {\n\t\t\tresolve(`https://unpkg.com/${pkg}`)\n\t\t})\n\t}\n}\n","/* eslint-env es6, browser */\n\nimport browserify from \"./browserify.js\"\nimport rawUrl from \"./rawUrl.js\"\nimport unpkg from \"./unpkg.js\"\n\nexport default {\n\tbrowserify,\n\trawUrl,\n\tunpkg,\n}\n","/* eslint-env es6, browser */\n\nexport default function tagSrcLoader (refs, url) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst script = document.createElement(\"script\")\n\t\t\t, returns = {}\n\t\t\t, timeouts = {}\n\n\t\tlet nReturns\n\n\t\tnReturns = 0\n\n\t\tscript.onerror = function onerror (scriptError) {\n\t\t\treject(scriptError)\n\t\t}\n\n\t\trefs.forEach((ref) => {\n\t\t\twindow.watch(ref, (value, oldObject, newObject) => {\n\t\t\t\twindow.unwatch(ref)\n\t\t\t\tconsole.debug(\"value\", value)\n\t\t\t\tconsole.debug(\"oldObject\", oldObject)\n\t\t\t\tconsole.debug(\"newObject\", newObject)\n\n\t\t\t\treturns[ref] = newObject\n\n\t\t\t\tnReturns += 1\n\n\t\t\t\tdelete window[value]\n\n\t\t\t\tconsole.debug(\"nReturns\", nReturns)\n\t\t\t\tconsole.debug(\"refs.length\", refs.length)\n\n\t\t\t\t// stop timeout now\n\t\t\t\tclearTimeout(timeouts[ref])\n\n\t\t\t\tif (nReturns === refs.length) {\n\t\t\t\t\tresolve(returns)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tfunction timeout () {\n\t\t\t\treject(`\"${ref}\" timed out. This package doesn't seem to provide the package you're looking for.`)\n\t\t\t}\n\n\t\t\ttimeouts[ref] = setTimeout(timeout, window.chainloadr.configuration.globalPackageTimeout)\n\t\t})\n\n\t\tscript.src = url\n\n\t\tscript.async = \"async\"\n\n\t\tdocument.head.appendChild(script)\n\t})\n}\n","import tagSrcLoader from \"./tagSrcLoader.js\"\n\nexport default {tagSrcLoader}\n","/* eslint-env es6, browser */\n\n// add .watch we need to polyfill this for chrome...\n\nexport default function addWinWatch () {\n\n\t/*\n\t\tBased on https://gist.github.com/eligrey/384583\n\t*/\n\n\tif (!window.watch) {\n\t\tconsole.info(\"Pollyfilling winwatch from Chainloadr\")\n\n\t\tObject.defineProperty(Object.getPrototypeOf(window), \"watch\", {\n\t\t\t\"configurable\": true,\n\t\t\t\"enumerable\": false,\n\t\t\t\"writable\": false,\n\t\t\tvalue (prop, handler) {\n\t\t\t\tlet oldval, newval\n\n\t\t\t\toldval = this[prop]\n\t\t\t\tnewval = oldval\n\n\t\t\t\tfunction getter () {\n\t\t\t\t\treturn newval\n\t\t\t\t}\n\n\t\t\t\tfunction setter (val) {\n\t\t\t\t\toldval = newval\n\t\t\t\t\tnewval = handler.call(this, prop, oldval, val)\n\n\t\t\t\t\treturn newval\n\t\t\t\t}\n\n\t\t\t\t// can't watch constants\n//\t\t\t\t\tif (delete this[prop]) {\n\t\t\t\t\tObject.defineProperty(this, prop, {\n\t\t\t\t\t\t\"configurable\": true,\n\t\t\t\t\t\t\"enumerable\": true,\n\t\t\t\t\t\t\"get\": getter,\n\t\t\t\t\t\t\"set\": setter\n\t\t\t\t\t})\n//\t\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tif (!window.unwatch) {\n\t\tObject.defineProperty(Object.getPrototypeOf(window), \"unwatch\", {\n\t\t\t\"enumerable\": false,\n\t\t\t\"configurable\": true,\n\t\t\t\"writable\": false,\n\t\t\tvalue (prop) {\n\t\t\t\tconst val = this[prop]\n\n\t\t\t\t// remove accessors\n\t\t\t\tdelete this[prop]\n\t\t\t\tthis[prop] = val\n\t\t\t}\n\t\t})\n\t}\n}\n","/* eslint-env browser, es6 */\n\nexport default function autoExec () {\n\tconst scripts = document.querySelectorAll(\"[data-chainloadr]\")\n\t\t, nScripts = scripts.length\n\n\tlet scriptIndex\n\n\tfor (scriptIndex = 0; scriptIndex < nScripts; scriptIndex += 1) {\n\t\tconst oldScript = scripts[scriptIndex]\n\t\t\t, newScript = document.createElement(\"script\")\n\n\t\tif (oldScript.innerHTML) {\n\t\t\tnewScript.innerHTML = oldScript.innerHTML\n\t\t} else if (oldScript.dataset.chainloadr) {\n\t\t\tnewScript.src = oldScript.dataset.chainloadr\n\t\t} else {\n\t\t\tthrow new Error(\"data-chainloadr script passed, but it has no contents and no external script. Please consult the documentation.\")\n\t\t}\n\n\t\toldScript.parentNode.insertBefore(newScript, oldScript.nextSibling)\n\t\toldScript.remove()\n\t}\n}\n","/* eslint-env es6, browser */\n\nimport repos from \"./repo/main.js\"\nimport loader from \"./loader/main.js\"\nimport addWinWatch from \"./winWatchPollyfill.js\"\nimport autoExec from \"./autoExec.js\"\n\naddWinWatch()\n\nconst loadedPackages = []\n\nfunction isPackageLoaded (testForPackage) {\n\tconst nLoadedPackages = loadedPackages.length\n\n\tlet loadedPackageI\n\n\tfor (loadedPackageI = 0; loadedPackageI < nLoadedPackages; loadedPackageI += 1) {\n\t\tconst thisPackage = loadedPackages[loadedPackageI]\n\n\t\tif (testForPackage === thisPackage) {\n\t\t\treturn true\n\t\t}\n\t}\n\n\treturn false\n}\n\nfunction chainloadrRaw (repoName, pkg, importArray) {\n\treturn new Promise((resolve, reject) => {\n\t\t// FUTURE: Careful of falsey values\n\t\tif (!importArray || !repoName || !pkg) {\n\t\t\tthrow new Error(\"Requires all three arguments. See documentation.\")\n\t\t}\n\n\t\tconsole.debug(\"repoName\", repoName)\n\t\tconsole.debug(\"pkg\", pkg)\n\t\tconsole.debug(\"importArray\", importArray)\n\n\t\tconst repo = repos[repoName]\n\n\t\tif (!pkg) {\n\t\t\tthrow new Error(`Malformed package query; \"${pkg}\" -- you must specify what this libarary exports to window using 'from'. See the documentation for more information`)\n\t\t}\n\n\t\tif (importArray.length < 1) {\n\t\t\tthrow new Error(`Malformed package query; \"${pkg}\" -- no variables to watch specified before \"from\"`)\n\t\t}\n\n\t\tif (isPackageLoaded(pkg)) {\n\t\t\tthrow new Error(`\"${pkg}\" is already loaded.`)\n\t\t}\n\n\t\tif (!repo) {\n\t\t\tthrow new Error(`Repo \"${repoName}\" not found. It is normally unwise to specify a repo name outright, consider allowing Chainloadr to pick a best repo for you.`)\n\t\t}\n\n\t\trepo.checkForPackage(pkg).then(() => {\n\t\t\tconsole.debug(\"Looks like our repo has our package!\")\n\t\t\trepo.buildPackageUrl(pkg).then((url) => {\n\t\t\t\tconsole.debug(\"We have a URL!\")\n\n\t\t\t\tloader.tagSrcLoader(importArray, url)\n\t\t\t\t. then((libs) => {\n\t\t\t\t\tconsole.debug(\"The loader just finished loading our lib!\")\n\n\t\t\t\t\tresolve(libs)\n\t\t\t\t})\n\t\t\t\t. catch(reject)\n\t\t\t})\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.warn(error)\n\t\t\treject(error)\n\t\t})\n\t})\n}\n\nfunction tryRepoAtIndex (packageQuery, index) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst keys = window.chainloadr.configuration.repositoryOrder\n\t\t\t, repo = keys[index]\n\t\t\t, impSplit = packageQuery.split(\"from\")\n\n\t\tconsole.debug(\"keys\", keys)\n\t\tconsole.debug(\"repo\", repo)\n\t\tconsole.debug(\"impSplit\", impSplit)\n\n\t\tchainloadrRaw(repo, impSplit[1].trim(), impSplit[0].split(\",\").map((value) => value.trim()))\n\t\t. then(resolve)\n\t\t. catch(() => {\n\t\t\tconsole.debug(\"Caught failed repo\")\n\t\t\tconsole.debug(\"keys.length\", keys.length)\n\t\t\tconsole.debug(\"index + 1\", index + 1)\n\n\t\t\tif (index + 1 < keys.length) {\n\t\t\t\ttryRepoAtIndex(packageQuery, index + 1)\n\t\t\t} else {\n\t\t\t\treject(new Error(`I tested ${index + 1} repos, none of which could find \"${packageQuery}\". Are you sure you spelt the package name correctly?`))\n\t\t\t}\n\t\t})\n\t})\n}\n\nfunction chainloadPackageQuery (packageQuery) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst spitChar = \"::\"\n\t\t\t, split = packageQuery.split(spitChar)\n\n\t\tconsole.debug(\"split\", split)\n\n\t\tif (split.length === 1) {\n\t\t\ttryRepoAtIndex(packageQuery, 0)\n\t\t\t. then(resolve)\n\t\t\t. catch(reject)\n\t\t} else if (split.length === 2) {\n\t\t\tconst impSplit = split[0].split(\"from\")\n\n\t\t\tchainloadrRaw(impSplit[1].trim(), split[1].trim(), impSplit[0].split(\",\").map((value) => value.trim()))\n\t\t\t. then(resolve)\n\t\t\t. catch(reject)\n\n\t\t} else {\n\t\t\treject(new Error(`Malformed package query; \"${packageQuery}\" -- too many '${spitChar}' characters`))\n\t\t}\n\n\t})\n}\n\nfunction chainloadr (pkgs) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst promises = []\n\n\t\tpkgs.split(\";\").forEach((pkgRaw) => {\n\t\t\tpromises.push(chainloadPackageQuery(pkgRaw))\n\t\t})\n\n\t\tPromise.all(promises).then((arrays) => {\n\t\t\tconst toReturn = {}\n\n\t\t\tarrays.forEach((objects) => {\n\t\t\t\tconsole.log(\"objects\", objects)\n\t\t\t\tObject.assign(toReturn, objects)\n\t\t\t})\n\n\t\t\t/*\n\t\t\t\tThis checks if there is only one argument to return, and if there is, it returns it on its lonesome outside of an object\n\t\t\t*/\n\n\t\t\t{\n\t\t\t\tconst keys = Object.keys(toReturn)\n\t\t\t\t\t, nKeys = keys.length\n\n\t\t\t\tif (nKeys === 1) {\n\t\t\t\t\tresolve(toReturn[keys[0]])\n\t\t\t\t} else {\n\t\t\t\t\tresolve(toReturn)\n\t\t\t\t}\n\t\t\t}\n\n\t\t})\n\t\t.catch((error) => {\n\t\t\treject(error)\n\t\t})\n\t})\n}\n\n// Add to the window object\nwindow.chainloadr = chainloadr\n\nwindow.chainloadr.configuration = {\n\t\"globalPackageTimeout\": 10000,\n\t// \"repositoryOrder\": Object.keys(repos),\n\t\"repositoryOrder\": [\"rawUrl\", \"unpkg\", \"browserify\"],\n}\n\n// Automatically execute data-chainloadr scripts\nautoExec()\n"],"names":[],"mappings":"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"}